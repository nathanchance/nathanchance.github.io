<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>May 2021 ClangBuiltLinux Work | Nathan Chancellor</title>
<meta name="keywords" content="clangbuiltlinux, linux, linuxfoundation, maintainer">
<meta name="description" content="This month felt longer than others but I feel like that was because I was a lot more spread out in the work that I was doing. Let&rsquo;s dive in, shall we?
Linux kernel patches / backports   [PATCH] fbmem: Correct position of &#39;__maybe_unused&#39; in proc_fb_seq_ops: A common mistake people make is splitting &ldquo;struct &rdquo; with an attribute, in this case &ldquo;__maybe_unused&rdquo;, which clang warns about while GCC does not.">
<meta name="author" content="Nathan Chancellor">
<link rel="canonical" href="https://nathanchance.dev/posts/may-2021-cbl-work/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.min.b4e19c453811e60acfec1f00c15ac2be1c53f6ab90187e684358ce7faaf48bab.css" integrity="sha256-tOGcRTgR5grP7B8AwVrCvhxT9quQGH5oQ1jOf6r0i6s=" rel="preload stylesheet" as="style">
<script defer crossorigin="anonymous" src="/assets/js/highlight.min.2840b7fccd34145847db71a290569594bdbdb00047097f75d6495d162f5d7dff.js" integrity="sha256-KEC3/M00FFhH23GikFaVlL29sABHCX911kldFi9dff8="
    onload="hljs.initHighlightingOnLoad();"></script>
<link rel="icon" href="https://nathanchance.dev/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="https://nathanchance.dev/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://nathanchance.dev/favicon-32x32.png">
<link rel="apple-touch-icon" href="https://nathanchance.dev/apple-touch-icon.png">
<link rel="mask-icon" href="https://nathanchance.dev/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --hljs-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript><meta property="og:title" content="May 2021 ClangBuiltLinux Work" />
<meta property="og:description" content="This month felt longer than others but I feel like that was because I was a lot more spread out in the work that I was doing. Let&rsquo;s dive in, shall we?
Linux kernel patches / backports   [PATCH] fbmem: Correct position of &#39;__maybe_unused&#39; in proc_fb_seq_ops: A common mistake people make is splitting &ldquo;struct &rdquo; with an attribute, in this case &ldquo;__maybe_unused&rdquo;, which clang warns about while GCC does not." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://nathanchance.dev/posts/may-2021-cbl-work/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2021-06-01T08:29:00-07:00" />
<meta property="article:modified_time" content="2021-06-01T08:29:00-07:00" />

<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="May 2021 ClangBuiltLinux Work"/>
<meta name="twitter:description" content="This month felt longer than others but I feel like that was because I was a lot more spread out in the work that I was doing. Let&rsquo;s dive in, shall we?
Linux kernel patches / backports   [PATCH] fbmem: Correct position of &#39;__maybe_unused&#39; in proc_fb_seq_ops: A common mistake people make is splitting &ldquo;struct &rdquo; with an attribute, in this case &ldquo;__maybe_unused&rdquo;, which clang warns about while GCC does not."/>


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Posts",
      "item": "https://nathanchance.dev/posts/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "May 2021 ClangBuiltLinux Work",
      "item": "https://nathanchance.dev/posts/may-2021-cbl-work/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "May 2021 ClangBuiltLinux Work",
  "name": "May 2021 ClangBuiltLinux Work",
  "description": "This month felt longer than others but I feel like that was because I was a lot more spread out in the work that I was doing. Let\u0026rsquo;s dive in, shall we?\nLinux kernel patches / backports   [PATCH] fbmem: Correct position of '__maybe_unused' in proc_fb_seq_ops: A common mistake people make is splitting \u0026ldquo;struct \u0026rdquo; with an attribute, in this case \u0026ldquo;__maybe_unused\u0026rdquo;, which clang warns about while GCC does not.",
  "keywords": [
    "clangbuiltlinux", "linux", "linuxfoundation", "maintainer"
  ],
  "articleBody": "This month felt longer than others but I feel like that was because I was a lot more spread out in the work that I was doing. Let’s dive in, shall we?\nLinux kernel patches / backports   [PATCH] fbmem: Correct position of '__maybe_unused' in proc_fb_seq_ops: A common mistake people make is splitting “struct ” with an attribute, in this case “__maybe_unused”, which clang warns about while GCC does not. This causes a warning in all of our builds. Unfortunately, this patch did not actually make it into mainline because Linus fixed it himself.\n  [PATCH] vmlinux.lds.h: Handle decrypted data section with !SMP: Kees Cook enabled orphan section warnings in 5.10, which means the linker will warn when a section is not handled by a linker script. Intel’s 0day bot turned up a randconfig that triggers a warning that will probably never be seen otherwise so I sent a patch to get that cleared up.\n  Backport of 1139aeb1c521 for all supported stable branches: This was a series of backports to the stable kernels for a warning about intentional misalignment, which impacted ChromeOS and will impact Android when they upgrade their version of clang.\n  UPSTREAM: crypto: arm/curve25519 - Move '.fpu' after '.arch': Our continuous integration tests Android trees since they are one of the biggest downstream consumers of our work (go figure, Google started this…) and this upstream patch is needed to build ARCH=arm allmodconfig.\n  [PATCH] Revert \"ASoC: q6dsp: q6afe: remove unneeded dead-store initialization\": Two patches that fixed the same Clang static analyzer warning were merged, which actually ended up introducing use of an uninitialized variable, which Intel’s 0day build robot thankfully pointed out to us.\n  Revert \"UPSTREAM: usb: gadget: f_uac2: validate input parameters\": A mismerge in the Android trees broke our continuous integration so I sent this in to get it working again.\n  [PATCH] x86: Fix location of '-plugin-opt=' flags: Someone reported a panic in the AMDGPU driver, which I helped track down to the fact that the stack alignment was not being passed along to the linker for LTO due to a Makefile variable clobber. This patch fixes it up and ensures we do not have something like this happen again. This will eventually be added to LLVM’s IR so that this flag is not necessary.\n  [PATCH 0/3] hexagon: Fix build error with CONFIG_STACKDEPOT and select CONFIG_ARCH_WANT_LD_ORPHAN_WARN: The Hexagon architecture is special because it is the only architecture in the kernel that cannot be built with GCC; it can only be built with LLVM. Qualcomm got it working upstream in v5.13-rc1 then within a couple of weeks, it was broken again because of some unnoticed bitrot. This patch series fixes it up and helps make sure it should not happen again.\n  [PATCH] powerpc/barrier: Avoid collision with clang's __lwsync macro: An upstream LLVM change broke all of our PowerPC builds back to 4.14 due to a builtin macro defintion coliding with an already existing defintion in arch/powerpc. This patch fixes it up by undefining the macro because the kernel does not want the builtin version.\n  [PATCH] MAINTAINERS: Add Clang CFI section: This patch solidifies the path for CFI patches to go upstream.\n  Patch review and input This month had quite a lot of review and patch testing, maybe more than the previous month. Code review is so critical for the success of these projects so it is important to do it quickly and well due to the velocity of both LLVM and Linux. There When possible, I link directly to my response but sometimes, the link is to the main post and my response can be seen inline.\n  [AArch64] Adds a pre-indexed paired Load/Store optimization for LDR-STR.\n  Re: CFI violation in drivers/infiniband/core/sysfs.c\n  Re: [PATCH v3] arm64: vdso: remove commas between macro name and arguments\n  Re: [PATCH 4.19 ONLY v4] arm64: vdso: remove commas between macro name and arguments\n  Re: [PATCH v2 dwarves] btf: Remove ftrace filter\n  Re: [PATCH kernel v2] powerpc/makefile: Do not redefine $(CPP) for preprocessor\n  Re: [PATCH kernel v3] powerpc/makefile: Do not redefine $(CPP) for preprocessor\n  Re: [PATCH] HID: i2c-hid: fix format string mismatch\n  Re: [PATCH] iio: si1133: fix format string warnings\n  Re: [PATCH] mm/shuffle: fix section mismatch warning\n  Re: [PATCH] kcsan: fix debugfs initcall return type\n  Re: [PATCH] riscv: Use -mno-relax when using lld linker\n  Re: [PATCH] [v2] platform/surface: aggregator: avoid clang -Wconstant-conversion warning\n  Re: [PATCH] drm/msm/dsi: fix 32-bit clang warning\n  Re: [PATCH] arm64: Define only {pud/pmd}_{set/clear}_huge when usefull\n  Re: [PATCH v2 3/4] memory: tegra124-emc: Fix compilation warnings on 64bit platforms\n  [RESEND PATCH 0/4] iio: Drop use of %hhx and %hx format strings\n  Re: [PATCH v2] powerpc/powernv/pci: fix header guard\n  Re: [PATCH 00/13] Reorganize sysfs file creation for struct ib_devices\n  Re: [PATCH v3] kcov: add __no_sanitize_coverage to fix noinstr for all architectures\n  Re: [PATCH 1/6] pgo: modules Expose module sections for clang PGO instumentation.\n  Re: [PATCH 2/6] pgo: modules Add definitions in pgo/pgo.h for modules\n  Re: [PATCH 3/6] pgo: modules Add module profile data export machinery.\n  Re: [PATCH 5/6] pgo: modules Fixup memory leak.\n  Re: [PATCH 6/6] pgo: Fixup code style issues.\n  Re: [PATCH] pgo: rename the raw profile file to vmlinux.profraw\n  Re: [PATCH v9] pgo: add clang's Profile Guided Optimization infrastructure\n  Issue triage and reporting As always, a little bit all over the place, LLVM and kernel issues, revisiting old problems, and triaging/reporting new ones :)\n  FAIL: Test report for kernel 5.12.0 (mainline.kernel.org-clang, 10a3efd0)\n  [InlineCost] Enable the cost benefit analysis on FDO\n  arm64 defconfig + full LTO failure\n  panic in rcu_do_batch for full lto\n  s390 all{mod,yes}config __ashlti3 and __lshrti3 after LLVM commit 1886aad9d03b\n  llvm-NN-linker-tools Debian package\n  Re: [BUG mips llvm] MIPS: malformed R_MIPS_{HI16,LO16} with LLVM\n  Re: [PATCH v1 2/2] memory: tegra: Enable compile testing for all drivers\n  Re: [broonie-misc:asoc-5.14 5/23] sound/soc/qcom/qdsp6/q6afe.c:1213:18: warning: variable 'port_id' is uninitialized when used here\n  Re: arch/powerpc/kernel/optprobes.c:34:1: error: unused function 'is_kprobe_ppc_optinsn_slot'\n  Support CROSS_COMPILE_COMPAT\n  Re: -Wconstant-conversion in drivers/net/ethernet/marvell/mvpp2/mvpp2_main.c\n  missing mflr/mtlr (link register save/restore) when using inline asm w/ \"lr\" clobber\n  Re: [next] x86_64 defconfig failed with clang-10\n  Re: [PATCH v3] mm, slub: change run-time assertion in kmalloc_index() to compile-time\n  Re: [PATCH v5 3/9] mm/mremap: Use pmd/pud_poplulate to update page table entries\n  Re: [staging:staging-next 201/268] drivers/staging/rtl8723bs/core/rtw_security.c:89:6: warning: stack frame size of 1120 bytes in function 'rtw_wep_encrypt'\n  Assertion `(IK == IK_FpInduction || Step-getType()-isIntegerTy()) \u0026\u0026 \"StepValue is not an integer\"' failed\n  Stack alignment plugin option boot failure with CONFIG_CFI_CLANG\n  51d334a845a082338735b0fdfc620a4b15fa26fe breaks x86_64 ThinLTO + dynamic ftrace\n  Re: [PATCH v2] fb_defio: Remove custom address_space_operations\n  [InstCombine] Fix miscompile on GEP+load to icmp fold (PR45210)\n  Tooling improvements Way more continuous integration work this time around, namely due to the additional testing with Android’s LLVM and regressions or changes upstream.\n  Disable boot for ppc32 on mainline\n  kernel/build.sh: Update name of source flag and variable\n  kernel: Update to Linux 5.12\n  Add problem matcher\n  Enable LLVM_IAS=1 for Android arm32 allmodconfig with LLVM 13\n  Add problem matcher\n  Fix problem matcher\n  Build arm64 with CFI on mainline and next\n  Enable LLVM_IAS=1 for Android arm32 allmodconfig with LLVM 13\n  Wire up builds with AOSP LLVM\n  Update artifact upload name\n  utils.py: Fix crash with LLVM_VERSION=android\n  boot-utils: Add support for m68k\n  Enable LLVM_IAS=1 for 32-bit ARM on mainline and next with LLVM 13\n  Fixup the Hexagon jobs and optimize around BOOT=0\n  build-llvm.py: Update known good revision\n  build-llvm.py: Fix handling of '--projects'\n  kernel/build.sh: Build more ARCH=arm configs\n  generator.yml: Disable arm64 big endian build with AOSP LLVM\n  Notating \"failed but unrelated to ClangBuiltLinux\" builds\n  Enable boot for ppc32 on -next and mainline with LLVM 13\n  Special thanks to:  Google and the Linux Foundation for sponsoring my work.  ",
  "wordCount" : "1236",
  "inLanguage": "en",
  "datePublished": "2021-06-01T08:29:00-07:00",
  "dateModified": "2021-06-01T08:29:00-07:00",
  "author":{
    "@type": "Person",
    "name": "Nathan Chancellor"
  },
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://nathanchance.dev/posts/may-2021-cbl-work/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "Nathan Chancellor",
    "logo": {
      "@type": "ImageObject",
      "url": "https://nathanchance.dev/favicon.ico"
    }
  }
}
</script>
</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://nathanchance.dev/" accesskey="h" title="Nathan Chancellor (Alt + H)">Nathan Chancellor</a>
            <span class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </span>
        </div>
        <ul id="menu">
            <li>
                <a href="https://nathanchance.dev/posts/" title="Blog">
                    <span>Blog</span>
                </a>
            </li>
            <li>
                <a href="https://nathanchance.dev/about/" title="About">
                    <span>About</span>
                </a>
            </li>
            <li>
                <a href="https://nathanchance.dev/nc_resume.pdf" title="Resume">
                    <span>Resume</span>
                </a>
            </li>
            <li>
                <a href="https://nathanchance.dev/downloads/" title="Downloads">
                    <span>Downloads</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    
    <h1 class="post-title">
      May 2021 ClangBuiltLinux Work
    </h1>
    <div class="post-meta"><span title='2021-06-01 08:29:00 -0700 MST'>June 1, 2021</span>&nbsp;·&nbsp;6 min&nbsp;·&nbsp;Nathan Chancellor&nbsp;|&nbsp;<a href="https://github.com/nathanchance/hugo-files/blob/main/content/posts/may-2021-cbl-work.md" rel="noopener noreferrer" target="_blank">Suggest Changes</a>

</div>
  </header> <div class="toc">
    <details >
        <summary accesskey="c" title="(Alt + C)">
            <span class="details">Table of Contents</span>
        </summary>

        <div class="inner"><ul>
                <li>
                    <a href="#linux-kernel-patches--backports" aria-label="Linux kernel patches / backports">Linux kernel patches / backports</a></li>
                <li>
                    <a href="#patch-review-and-input" aria-label="Patch review and input">Patch review and input</a></li>
                <li>
                    <a href="#issue-triage-and-reporting" aria-label="Issue triage and reporting">Issue triage and reporting</a></li>
                <li>
                    <a href="#tooling-improvements" aria-label="Tooling improvements">Tooling improvements</a></li>
                <li>
                    <a href="#special-thanks-to" aria-label="Special thanks to:">Special thanks to:</a>
                </li>
            </ul>
        </div>
    </details>
</div>

  <div class="post-content"><p>This month felt longer than others but I feel like that was because I was a lot more spread out in the work that I was doing. Let&rsquo;s dive in, shall we?</p>
<h2 id="linux-kernel-patches--backports">Linux kernel patches / backports<a hidden class="anchor" aria-hidden="true" href="#linux-kernel-patches--backports">#</a></h2>
<ul>
<li>
<p><a href="https://lore.kernel.org/r/20210505182808.3855516-1-nathan@kernel.org/"><code>[PATCH] fbmem: Correct position of '__maybe_unused' in proc_fb_seq_ops</code></a>: A common mistake people make is splitting &ldquo;struct <!-- raw HTML omitted -->&rdquo; with an attribute, in this case &ldquo;__maybe_unused&rdquo;, which clang warns about while GCC does not. This causes a warning in all of our builds. Unfortunately, this patch did not actually make it into mainline because <a href="https://git.kernel.org/linus/6dae40aed484ef2f1a3934dcdcd17b7055173e56">Linus fixed it himself</a>.</p>
</li>
<li>
<p><a href="https://lore.kernel.org/r/20210506001410.1026691-1-nathan@kernel.org/"><code>[PATCH] vmlinux.lds.h: Handle decrypted data section with !SMP</code></a>: Kees Cook enabled orphan section warnings in 5.10, which means the linker will warn when a section is not handled by a linker script. Intel&rsquo;s 0day bot turned up a randconfig that triggers a warning that will probably never be seen otherwise so I sent a patch to get that cleared up.</p>
</li>
<li>
<p><a href="https://lore.kernel.org/r/YJmneuxxFWIrqyWN@archlinux-ax161/"><code>Backport of 1139aeb1c521 for all supported stable branches</code></a>: This was a series of backports to the stable kernels for a warning about intentional misalignment, which impacted ChromeOS and will impact Android when they upgrade their version of clang.</p>
</li>
<li>
<p><a href="https://android-review.googlesource.com/c/kernel/common/+/1702245"><code>UPSTREAM: crypto: arm/curve25519 - Move '.fpu' after '.arch'</code></a>: Our continuous integration tests Android trees since they are one of the biggest downstream consumers of our work (go figure, Google started this&hellip;) and this upstream patch is needed to build <code>ARCH=arm allmodconfig</code>.</p>
</li>
<li>
<p><a href="https://lore.kernel.org/r/20210511190306.2418917-1-nathan@kernel.org/"><code>[PATCH] Revert &quot;ASoC: q6dsp: q6afe: remove unneeded dead-store initialization&quot;</code></a>: Two patches that fixed the same Clang static analyzer warning were merged, which actually ended up introducing use of an uninitialized variable, which Intel&rsquo;s 0day build robot thankfully pointed out to us.</p>
</li>
<li>
<p><a href="https://android-review.googlesource.com/c/kernel/common/+/1706245"><code>Revert &quot;UPSTREAM: usb: gadget: f_uac2: validate input parameters&quot;</code></a>: A mismerge in the Android trees broke our continuous integration so I sent this in to get it working again.</p>
</li>
<li>
<p><a href="https://lore.kernel.org/r/20210518190106.60935-1-nathan@kernel.org/"><code>[PATCH] x86: Fix location of '-plugin-opt=' flags</code></a>: Someone reported a panic in the AMDGPU driver, which I helped track down to the fact that the stack alignment was not being passed along to the linker for LTO due to a Makefile variable clobber. This patch fixes it up and ensures we do not have something like this happen again. This will eventually be added to LLVM&rsquo;s IR so that this flag is not necessary.</p>
</li>
<li>
<p><a href="https://lore.kernel.org/r/20210521011239.1332345-1-nathan@kernel.org/"><code>[PATCH 0/3] hexagon: Fix build error with CONFIG_STACKDEPOT and select CONFIG_ARCH_WANT_LD_ORPHAN_WARN</code></a>: The Hexagon architecture is special because it is the only architecture in the kernel that cannot be built with GCC; it can only be built with LLVM. Qualcomm got it working upstream in v5.13-rc1 then within a couple of weeks, it was broken again because of some unnoticed bitrot. This patch series fixes it up and helps make sure it should not happen again.</p>
</li>
<li>
<p><a href="https://lore.kernel.org/r/20210528182752.1852002-1-nathan@kernel.org/"><code>[PATCH] powerpc/barrier: Avoid collision with clang's __lwsync macro</code></a>: An upstream LLVM change broke all of our PowerPC builds back to 4.14 due to a builtin macro defintion coliding with an already existing defintion in <code>arch/powerpc</code>. This patch fixes it up by undefining the macro because the kernel does not want the builtin version.</p>
</li>
<li>
<p><a href="https://lore.kernel.org/r/20210531205405.67993-1-nathan@kernel.org/"><code>[PATCH] MAINTAINERS: Add Clang CFI section</code></a>: This patch solidifies the path for CFI patches to go upstream.</p>
</li>
</ul>
<h2 id="patch-review-and-input">Patch review and input<a hidden class="anchor" aria-hidden="true" href="#patch-review-and-input">#</a></h2>
<p>This month had quite a lot of review and patch testing, maybe more than the previous month. Code review is so critical for the success of these projects so it is important to do it quickly and well due to the velocity of both LLVM and Linux. There When possible, I link directly to my response but sometimes, the link is to the main post and my response can be seen inline.</p>
<ul>
<li>
<p><a href="https://reviews.llvm.org/D99272#2739081"><code>[AArch64] Adds a pre-indexed paired Load/Store optimization for LDR-STR.</code></a></p>
</li>
<li>
<p><a href="https://lore.kernel.org/r/YJL7UoSr42JfMCq1@archlinux-ax161/"><code>Re: CFI violation in drivers/infiniband/core/sysfs.c</code></a></p>
</li>
<li>
<p><a href="https://lore.kernel.org/r/YJMJAiwMPqlWmr8Y@archlinux-ax161/"><code>Re: [PATCH v3] arm64: vdso: remove commas between macro name and arguments</code></a></p>
</li>
<li>
<p><a href="https://lore.kernel.org/r/fd08dce2-71c0-3414-d661-d065480c04ff@kernel.org/"><code>Re: [PATCH 4.19 ONLY v4] arm64: vdso: remove commas between macro name and arguments</code></a></p>
</li>
<li>
<p><a href="https://lore.kernel.org/r/YJSr7S7dRty3K8Wd@archlinux-ax161/"><code>Re: [PATCH v2 dwarves] btf: Remove ftrace filter</code></a></p>
</li>
<li>
<p><a href="https://lore.kernel.org/r/3579aa0d-0470-9a6b-e35b-48f997a5b48b@kernel.org/"><code>Re: [PATCH kernel v2] powerpc/makefile: Do not redefine $(CPP) for preprocessor</code></a></p>
</li>
<li>
<p><a href="https://lore.kernel.org/r/dedc7262-2956-37b2-ebfd-ae8eb9b56716@kernel.org/"><code>Re: [PATCH kernel v3] powerpc/makefile: Do not redefine $(CPP) for preprocessor</code></a></p>
</li>
<li>
<p><a href="https://lore.kernel.org/r/84b20dcb-b063-b2b0-b2dc-1a1befbc334c@kernel.org/"><code>Re: [PATCH] HID: i2c-hid: fix format string mismatch</code></a></p>
</li>
<li>
<p><a href="https://lore.kernel.org/r/7afc367b-8103-9d48-1bfe-d505d86553b9@kernel.org/"><code>Re: [PATCH] iio: si1133: fix format string warnings</code></a></p>
</li>
<li>
<p><a href="https://lore.kernel.org/r/1904893e-1e7f-b1a4-454c-6999f8ac670a@kernel.org/"><code>Re: [PATCH] mm/shuffle: fix section mismatch warning</code></a></p>
</li>
<li>
<p><a href="https://lore.kernel.org/r/0ad11966-b286-395e-e9ca-e278de6ef872@kernel.org/"><code>Re: [PATCH] kcsan: fix debugfs initcall return type</code></a></p>
</li>
<li>
<p><a href="https://lore.kernel.org/r/bd8ae62f-1ead-2d82-5fdb-87308accc023@kernel.org/"><code>Re: [PATCH] riscv: Use -mno-relax when using lld linker</code></a></p>
</li>
<li>
<p><a href="https://lore.kernel.org/r/057b5568-c4b8-820c-3dd7-2200f61a4d58@kernel.org/"><code>Re: [PATCH] [v2] platform/surface: aggregator: avoid clang -Wconstant-conversion warning</code></a></p>
</li>
<li>
<p><a href="https://lore.kernel.org/r/58a35b85-eb0e-bc02-29be-0cae46bd75b8@kernel.org/"><code>Re: [PATCH] drm/msm/dsi: fix 32-bit clang warning</code></a></p>
</li>
<li>
<p><a href="https://lore.kernel.org/r/YJ9HAg+o8nd2xmix@archlinux-ax161/"><code>Re: [PATCH] arm64: Define only {pud/pmd}_{set/clear}_huge when usefull</code></a></p>
</li>
<li>
<p><a href="https://lore.kernel.org/r/831d3af5-1e4a-f3c0-f69d-3fff145fde08@kernel.org/"><code>Re: [PATCH v2 3/4] memory: tegra124-emc: Fix compilation warnings on 64bit platforms</code></a></p>
</li>
<li>
<p><a href="https://lore.kernel.org/r/20210517125554.1463156-1-jic23@kernel.org/"><code>[RESEND PATCH 0/4] iio: Drop use of %hhx and %hx format strings</code></a></p>
</li>
<li>
<p><a href="https://lore.kernel.org/r/4aa06438-7bea-a5a6-ff64-0cf8c28e2511@kernel.org/"><code>Re: [PATCH v2] powerpc/powernv/pci: fix header guard</code></a></p>
</li>
<li>
<p><a href="https://lore.kernel.org/r/34754eda-f135-8da8-c46f-3ef45a08ea11@kernel.org/"><code>Re: [PATCH 00/13] Reorganize sysfs file creation for struct ib_devices</code></a></p>
</li>
<li>
<p><a href="https://lore.kernel.org/r/be3971b1-cf26-36c7-0f9c-d79c656ec855@kernel.org/"><code>Re: [PATCH v3] kcov: add __no_sanitize_coverage to fix noinstr for all architectures</code></a></p>
</li>
<li>
<p><a href="https://lore.kernel.org/r/YLUl/eQ1EzMFSb9F@Ryzen-9-3900X.localdomain/"><code>Re: [PATCH 1/6] pgo: modules Expose module sections for clang PGO instumentation.</code></a></p>
</li>
<li>
<p><a href="https://lore.kernel.org/r/YLUtUV3ZSIqPZbX+@Ryzen-9-3900X.localdomain/"><code>Re: [PATCH 2/6] pgo: modules Add definitions in pgo/pgo.h for modules</code></a></p>
</li>
<li>
<p><a href="https://lore.kernel.org/r/YLU0VAoWG7qa7u24@Ryzen-9-3900X.localdomain/"><code>Re: [PATCH 3/6] pgo: modules Add module profile data export machinery.</code></a></p>
</li>
<li>
<p><a href="https://lore.kernel.org/r/YLUo6HrhWmeg2g1w@Ryzen-9-3900X.localdomain/"><code>Re: [PATCH 5/6] pgo: modules Fixup memory leak.</code></a></p>
</li>
<li>
<p><a href="https://lore.kernel.org/r/YLUoiJr5+7WX+roL@Ryzen-9-3900X.localdomain/"><code>Re: [PATCH 6/6] pgo: Fixup code style issues.</code></a></p>
</li>
<li>
<p><a href="https://lore.kernel.org/r/e22afde4-e312-4589-cf2e-3c35219d7249@kernel.org/"><code>Re: [PATCH] pgo: rename the raw profile file to vmlinux.profraw</code></a></p>
</li>
<li>
<p><a href="https://lore.kernel.org/r/YLVRTilQ5k5n+Vmz@archlinux-ax161/"><code>Re: [PATCH v9] pgo: add clang's Profile Guided Optimization infrastructure</code></a></p>
</li>
</ul>
<h2 id="issue-triage-and-reporting">Issue triage and reporting<a hidden class="anchor" aria-hidden="true" href="#issue-triage-and-reporting">#</a></h2>
<p>As always, a little bit all over the place, LLVM and kernel issues, revisiting old problems, and triaging/reporting new ones :)</p>
<ul>
<li>
<p><a href="https://groups.google.com/g/clang-built-linux/c/r1j32US2Ag4/m/imaeSitHAAAJ"><code>FAIL: Test report for kernel 5.12.0 (mainline.kernel.org-clang, 10a3efd0)</code></a></p>
</li>
<li>
<p><a href="https://reviews.llvm.org/D98213"><code>[InlineCost] Enable the cost benefit analysis on FDO</code></a></p>
</li>
<li>
<p><a href="https://github.com/ClangBuiltLinux/continuous-integration2/issues/128"><code>arm64 defconfig + full LTO failure</code></a></p>
</li>
<li>
<p><a href="https://github.com/ClangBuiltLinux/linux/issues/1368"><code>panic in rcu_do_batch for full lto</code></a></p>
</li>
<li>
<p><a href="https://github.com/ClangBuiltLinux/linux/issues/1370"><code>s390 all{mod,yes}config __ashlti3 and __lshrti3 after LLVM commit 1886aad9d03b</code></a></p>
</li>
<li>
<p><a href="https://github.com/ClangBuiltLinux/linux/issues/1357"><code>llvm-NN-linker-tools Debian package</code></a></p>
</li>
<li>
<p><a href="https://lore.kernel.org/r/YJTwglbUOb67r733@archlinux-ax161/"><code>Re: [BUG mips llvm] MIPS: malformed R_MIPS_{HI16,LO16} with LLVM</code></a></p>
</li>
<li>
<p><a href="https://lore.kernel.org/r/YJrARxhVD7QM%2FGPv@archlinux-ax161/"><code>Re: [PATCH v1 2/2] memory: tegra: Enable compile testing for all drivers</code></a></p>
</li>
<li>
<p><a href="https://lists.01.org/hyperkitty/list/kbuild-all@lists.01.org/message/B72WDKUO6KVMS4FTTJGGSERYZVWWMUMA/"><code>Re: [broonie-misc:asoc-5.14 5/23] sound/soc/qcom/qdsp6/q6afe.c:1213:18: warning: variable 'port_id' is uninitialized when used here</code></a></p>
</li>
<li>
<p><a href="https://lore.kernel.org/r/208186f3-aab0-d94e-bcf4-8347983cc1a6@kernel.org/"><code>Re: arch/powerpc/kernel/optprobes.c:34:1: error: unused function 'is_kprobe_ppc_optinsn_slot'</code></a></p>
</li>
<li>
<p><a href="https://gitlab.com/Linaro/tuxsuite/-/issues/108"><code>Support CROSS_COMPILE_COMPAT</code></a></p>
</li>
<li>
<p><a href="https://lore.kernel.org/r/YJx48BfKpWMZCbnz@archlinux-ax161/"><code>Re: -Wconstant-conversion in drivers/net/ethernet/marvell/mvpp2/mvpp2_main.c</code></a></p>
</li>
<li>
<p><a href="https://bugs.llvm.org/show_bug.cgi?id=50147"><code>missing mflr/mtlr (link register save/restore) when using inline asm w/ &quot;lr&quot; clobber</code></a></p>
</li>
<li>
<p><a href="https://lore.kernel.org/r/e6ee5c21-a460-b4f7-9d0a-e2711ec16185@kernel.org/"><code>Re: [next] x86_64 defconfig failed with clang-10</code></a></p>
</li>
<li>
<p><a href="https://lore.kernel.org/r/YKC9CeAfw3aBmHTU@archlinux-ax161/"><code>Re: [PATCH v3] mm, slub: change run-time assertion in kmalloc_index() to compile-time</code></a></p>
</li>
<li>
<p><a href="https://lore.kernel.org/r/YKQdxpHVYB9H0M0j@Ryzen-9-3900X.localdomain/"><code>Re: [PATCH v5 3/9] mm/mremap: Use pmd/pud_poplulate to update page table entries</code></a></p>
</li>
<li>
<p><a href="https://lore.kernel.org/r/YKgHy7ZNNxv%2FKMl8@archlinux-ax161/"><code>Re: [staging:staging-next 201/268] drivers/staging/rtl8723bs/core/rtw_security.c:89:6: warning: stack frame size of 1120 bytes in function 'rtw_wep_encrypt'</code></a></p>
</li>
<li>
<p><a href="https://github.com/ClangBuiltLinux/linux/issues/1383"><code>Assertion `(IK == IK_FpInduction || Step-&gt;getType()-&gt;isIntegerTy()) &amp;&amp; &quot;StepValue is not an integer&quot;' failed</code></a></p>
</li>
<li>
<p><a href="https://github.com/ClangBuiltLinux/linux/issues/1384"><code>Stack alignment plugin option boot failure with CONFIG_CFI_CLANG</code></a></p>
</li>
<li>
<p><a href="https://github.com/ClangBuiltLinux/linux/issues/1385"><code>51d334a845a082338735b0fdfc620a4b15fa26fe breaks x86_64 ThinLTO + dynamic ftrace</code></a></p>
</li>
<li>
<p><a href="https://lore.kernel.org/r/YLPjwUUmHDRjyPpR@Ryzen-9-3900X.localdomain/"><code>Re: [PATCH v2] fb_defio: Remove custom address_space_operations</code></a></p>
</li>
<li>
<p><a href="https://reviews.llvm.org/D99481"><code>[InstCombine] Fix miscompile on GEP+load to icmp fold (PR45210)</code></a></p>
</li>
</ul>
<h2 id="tooling-improvements">Tooling improvements<a hidden class="anchor" aria-hidden="true" href="#tooling-improvements">#</a></h2>
<p>Way more continuous integration work this time around, namely due to the additional testing with Android&rsquo;s LLVM and regressions or changes upstream.</p>
<ul>
<li>
<p><a href="https://github.com/ClangBuiltLinux/continuous-integration2/pull/127"><code>Disable boot for ppc32 on mainline</code></a></p>
</li>
<li>
<p><a href="https://github.com/ClangBuiltLinux/tc-build/pull/147"><code>kernel/build.sh: Update name of source flag and variable</code></a></p>
</li>
<li>
<p><a href="https://github.com/ClangBuiltLinux/tc-build/pull/149"><code>kernel: Update to Linux 5.12</code></a></p>
</li>
<li>
<p><a href="https://github.com/ClangBuiltLinux/continuous-integration2/pull/130"><code>Add problem matcher</code></a></p>
</li>
<li>
<p><a href="https://github.com/ClangBuiltLinux/continuous-integration2/pull/131"><code>Enable LLVM_IAS=1 for Android arm32 allmodconfig with LLVM 13</code></a></p>
</li>
<li>
<p><a href="https://github.com/ClangBuiltLinux/continuous-integration2/pull/130"><code>Add problem matcher</code></a></p>
</li>
<li>
<p><a href="https://github.com/ClangBuiltLinux/continuous-integration2/pull/134"><code>Fix problem matcher</code></a></p>
</li>
<li>
<p><a href="https://github.com/ClangBuiltLinux/continuous-integration2/pull/132"><code>Build arm64 with CFI on mainline and next</code></a></p>
</li>
<li>
<p><a href="https://github.com/ClangBuiltLinux/continuous-integration2/pull/131"><code>Enable LLVM_IAS=1 for Android arm32 allmodconfig with LLVM 13</code></a></p>
</li>
<li>
<p><a href="https://github.com/ClangBuiltLinux/continuous-integration2/pull/135"><code>Wire up builds with AOSP LLVM</code></a></p>
</li>
<li>
<p><a href="https://github.com/ClangBuiltLinux/continuous-integration2/pull/136"><code>Update artifact upload name</code></a></p>
</li>
<li>
<p><a href="https://github.com/ClangBuiltLinux/continuous-integration2/pull/137"><code>utils.py: Fix crash with LLVM_VERSION=android</code></a></p>
</li>
<li>
<p><a href="https://github.com/ClangBuiltLinux/boot-utils/pull/45"><code>boot-utils: Add support for m68k</code></a></p>
</li>
<li>
<p><a href="https://github.com/ClangBuiltLinux/continuous-integration2/pull/139"><code>Enable LLVM_IAS=1 for 32-bit ARM on mainline and next with LLVM 13</code></a></p>
</li>
<li>
<p><a href="https://github.com/ClangBuiltLinux/continuous-integration2/pull/140"><code>Fixup the Hexagon jobs and optimize around BOOT=0</code></a></p>
</li>
<li>
<p><a href="https://github.com/ClangBuiltLinux/tc-build/pull/152"><code>build-llvm.py: Update known good revision</code></a></p>
</li>
<li>
<p><a href="https://github.com/ClangBuiltLinux/tc-build/pull/153"><code>build-llvm.py: Fix handling of '--projects'</code></a></p>
</li>
<li>
<p><a href="https://github.com/ClangBuiltLinux/tc-build/pull/154"><code>kernel/build.sh: Build more ARCH=arm configs</code></a></p>
</li>
<li>
<p><a href="https://github.com/ClangBuiltLinux/continuous-integration2/pull/142"><code>generator.yml: Disable arm64 big endian build with AOSP LLVM</code></a></p>
</li>
<li>
<p><a href="https://github.com/ClangBuiltLinux/continuous-integration2/issues/143"><code>Notating &quot;failed but unrelated to ClangBuiltLinux&quot; builds</code></a></p>
</li>
<li>
<p><a href="https://github.com/ClangBuiltLinux/continuous-integration2/pull/144"><code>Enable boot for ppc32 on -next and mainline with LLVM 13</code></a></p>
</li>
</ul>
<h2 id="special-thanks-to">Special thanks to:<a hidden class="anchor" aria-hidden="true" href="#special-thanks-to">#</a></h2>
<ul>
<li><a href="https://www.google.com/">Google</a> and <a href="https://linuxfoundation.org/">the Linux Foundation</a> for <a href="https://linuxfoundation.org/en/press-release/google-funds-linux-kernel-developers-to-focus-exclusively-on-security/">sponsoring my work</a>.</li>
</ul>


  </div>

  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="https://nathanchance.dev/tags/clangbuiltlinux/">clangbuiltlinux</a></li>
      <li><a href="https://nathanchance.dev/tags/linux/">linux</a></li>
      <li><a href="https://nathanchance.dev/tags/linuxfoundation/">linuxfoundation</a></li>
      <li><a href="https://nathanchance.dev/tags/maintainer/">maintainer</a></li>
    </ul>
<nav class="paginav">
  <a class="prev" href="https://nathanchance.dev/posts/june-2021-cbl-work/">
    <span class="title">« Prev Page</span>
    <br>
    <span>June 2021 ClangBuiltLinux Work</span>
  </a>
  <a class="next" href="https://nathanchance.dev/posts/april-2021-cbl-work/">
    <span class="title">Next Page »</span>
    <br>
    <span>April 2021 ClangBuiltLinux Work</span>
  </a>
</nav>


<div class="share-buttons">
    <a target="_blank" rel="noopener noreferrer" aria-label="share May 2021 ClangBuiltLinux Work on twitter"
        href="https://twitter.com/intent/tweet/?text=May%202021%20ClangBuiltLinux%20Work&amp;url=https%3a%2f%2fnathanchance.dev%2fposts%2fmay-2021-cbl-work%2f&amp;hashtags=clangbuiltlinux%2clinux%2clinuxfoundation%2cmaintainer">
        <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve">
            <path
                d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-253.927,424.544c135.939,0 210.268,-112.643 210.268,-210.268c0,-3.218 0,-6.437 -0.153,-9.502c14.406,-10.421 26.973,-23.448 36.935,-38.314c-13.18,5.824 -27.433,9.809 -42.452,11.648c15.326,-9.196 26.973,-23.602 32.49,-40.92c-14.252,8.429 -30.038,14.56 -46.896,17.931c-13.487,-14.406 -32.644,-23.295 -53.946,-23.295c-40.767,0 -73.87,33.104 -73.87,73.87c0,5.824 0.613,11.494 1.992,16.858c-61.456,-3.065 -115.862,-32.49 -152.337,-77.241c-6.284,10.881 -9.962,23.601 -9.962,37.088c0,25.594 13.027,48.276 32.95,61.456c-12.107,-0.307 -23.448,-3.678 -33.41,-9.196l0,0.92c0,35.862 25.441,65.594 59.311,72.49c-6.13,1.686 -12.72,2.606 -19.464,2.606c-4.751,0 -9.348,-0.46 -13.946,-1.38c9.349,29.426 36.628,50.728 68.965,51.341c-25.287,19.771 -57.164,31.571 -91.8,31.571c-5.977,0 -11.801,-0.306 -17.625,-1.073c32.337,21.15 71.264,33.41 112.95,33.41Z" />
        </svg>
    </a>
    <a target="_blank" rel="noopener noreferrer" aria-label="share May 2021 ClangBuiltLinux Work on linkedin"
        href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3a%2f%2fnathanchance.dev%2fposts%2fmay-2021-cbl-work%2f&amp;title=May%202021%20ClangBuiltLinux%20Work&amp;summary=May%202021%20ClangBuiltLinux%20Work&amp;source=https%3a%2f%2fnathanchance.dev%2fposts%2fmay-2021-cbl-work%2f">
        <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve">
            <path
                d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-288.985,423.278l0,-225.717l-75.04,0l0,225.717l75.04,0Zm270.539,0l0,-129.439c0,-69.333 -37.018,-101.586 -86.381,-101.586c-39.804,0 -57.634,21.891 -67.617,37.266l0,-31.958l-75.021,0c0.995,21.181 0,225.717 0,225.717l75.02,0l0,-126.056c0,-6.748 0.486,-13.492 2.474,-18.315c5.414,-13.475 17.767,-27.434 38.494,-27.434c27.135,0 38.007,20.707 38.007,51.037l0,120.768l75.024,0Zm-307.552,-334.556c-25.674,0 -42.448,16.879 -42.448,39.002c0,21.658 16.264,39.002 41.455,39.002l0.484,0c26.165,0 42.452,-17.344 42.452,-39.002c-0.485,-22.092 -16.241,-38.954 -41.943,-39.002Z" />
        </svg>
    </a>
    <a target="_blank" rel="noopener noreferrer" aria-label="share May 2021 ClangBuiltLinux Work on reddit"
        href="https://reddit.com/submit?url=https%3a%2f%2fnathanchance.dev%2fposts%2fmay-2021-cbl-work%2f&title=May%202021%20ClangBuiltLinux%20Work">
        <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve">
            <path
                d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-3.446,265.638c0,-22.964 -18.616,-41.58 -41.58,-41.58c-11.211,0 -21.361,4.457 -28.841,11.666c-28.424,-20.508 -67.586,-33.757 -111.204,-35.278l18.941,-89.121l61.884,13.157c0.756,15.734 13.642,28.29 29.56,28.29c16.407,0 29.706,-13.299 29.706,-29.701c0,-16.403 -13.299,-29.702 -29.706,-29.702c-11.666,0 -21.657,6.792 -26.515,16.578l-69.105,-14.69c-1.922,-0.418 -3.939,-0.042 -5.585,1.036c-1.658,1.073 -2.811,2.761 -3.224,4.686l-21.152,99.438c-44.258,1.228 -84.046,14.494 -112.837,35.232c-7.468,-7.164 -17.589,-11.591 -28.757,-11.591c-22.965,0 -41.585,18.616 -41.585,41.58c0,16.896 10.095,31.41 24.568,37.918c-0.639,4.135 -0.99,8.328 -0.99,12.576c0,63.977 74.469,115.836 166.33,115.836c91.861,0 166.334,-51.859 166.334,-115.836c0,-4.218 -0.347,-8.387 -0.977,-12.493c14.564,-6.47 24.735,-21.034 24.735,-38.001Zm-119.474,108.193c-20.27,20.241 -59.115,21.816 -70.534,21.816c-11.428,0 -50.277,-1.575 -70.522,-21.82c-3.007,-3.008 -3.007,-7.882 0,-10.889c3.003,-2.999 7.882,-3.003 10.885,0c12.777,12.781 40.11,17.317 59.637,17.317c19.522,0 46.86,-4.536 59.657,-17.321c3.016,-2.999 7.886,-2.995 10.885,0.008c3.008,3.011 3.003,7.882 -0.008,10.889Zm-5.23,-48.781c-16.373,0 -29.701,-13.324 -29.701,-29.698c0,-16.381 13.328,-29.714 29.701,-29.714c16.378,0 29.706,13.333 29.706,29.714c0,16.374 -13.328,29.698 -29.706,29.698Zm-160.386,-29.702c0,-16.381 13.328,-29.71 29.714,-29.71c16.369,0 29.689,13.329 29.689,29.71c0,16.373 -13.32,29.693 -29.689,29.693c-16.386,0 -29.714,-13.32 -29.714,-29.693Z" />
        </svg>
    </a>
    <a target="_blank" rel="noopener noreferrer" aria-label="share May 2021 ClangBuiltLinux Work on facebook"
        href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2fnathanchance.dev%2fposts%2fmay-2021-cbl-work%2f">
        <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve">
            <path
                d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-106.468,0l0,-192.915l66.6,0l12.672,-82.621l-79.272,0l0,-53.617c0,-22.603 11.073,-44.636 46.58,-44.636l36.042,0l0,-70.34c0,0 -32.71,-5.582 -63.982,-5.582c-65.288,0 -107.96,39.569 -107.96,111.204l0,62.971l-72.573,0l0,82.621l72.573,0l0,192.915l-191.104,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Z" />
        </svg>
    </a>
    <a target="_blank" rel="noopener noreferrer" aria-label="share May 2021 ClangBuiltLinux Work on whatsapp"
        href="https://api.whatsapp.com/send?text=May%202021%20ClangBuiltLinux%20Work%20-%20https%3a%2f%2fnathanchance.dev%2fposts%2fmay-2021-cbl-work%2f">
        <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve">
            <path
                d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-58.673,127.703c-33.842,-33.881 -78.847,-52.548 -126.798,-52.568c-98.799,0 -179.21,80.405 -179.249,179.234c-0.013,31.593 8.241,62.428 23.927,89.612l-25.429,92.884l95.021,-24.925c26.181,14.28 55.659,21.807 85.658,21.816l0.074,0c98.789,0 179.206,-80.413 179.247,-179.243c0.018,-47.895 -18.61,-92.93 -52.451,-126.81Zm-126.797,275.782l-0.06,0c-26.734,-0.01 -52.954,-7.193 -75.828,-20.767l-5.441,-3.229l-56.386,14.792l15.05,-54.977l-3.542,-5.637c-14.913,-23.72 -22.791,-51.136 -22.779,-79.287c0.033,-82.142 66.867,-148.971 149.046,-148.971c39.793,0.014 77.199,15.531 105.329,43.692c28.128,28.16 43.609,65.592 43.594,105.4c-0.034,82.149 -66.866,148.983 -148.983,148.984Zm81.721,-111.581c-4.479,-2.242 -26.499,-13.075 -30.604,-14.571c-4.105,-1.495 -7.091,-2.241 -10.077,2.241c-2.986,4.483 -11.569,14.572 -14.182,17.562c-2.612,2.988 -5.225,3.364 -9.703,1.12c-4.479,-2.241 -18.91,-6.97 -36.017,-22.23c-13.314,-11.876 -22.304,-26.542 -24.916,-31.026c-2.612,-4.484 -0.279,-6.908 1.963,-9.14c2.016,-2.007 4.48,-5.232 6.719,-7.847c2.24,-2.615 2.986,-4.484 4.479,-7.472c1.493,-2.99 0.747,-5.604 -0.374,-7.846c-1.119,-2.241 -10.077,-24.288 -13.809,-33.256c-3.635,-8.733 -7.327,-7.55 -10.077,-7.688c-2.609,-0.13 -5.598,-0.158 -8.583,-0.158c-2.986,0 -7.839,1.121 -11.944,5.604c-4.105,4.484 -15.675,15.32 -15.675,37.364c0,22.046 16.048,43.342 18.287,46.332c2.24,2.99 31.582,48.227 76.511,67.627c10.685,4.615 19.028,7.371 25.533,9.434c10.728,3.41 20.492,2.929 28.209,1.775c8.605,-1.285 26.499,-10.833 30.231,-21.295c3.732,-10.464 3.732,-19.431 2.612,-21.298c-1.119,-1.869 -4.105,-2.99 -8.583,-5.232Z" />
        </svg>
    </a>
    <a target="_blank" rel="noopener noreferrer" aria-label="share May 2021 ClangBuiltLinux Work on telegram"
        href="https://telegram.me/share/url?text=May%202021%20ClangBuiltLinux%20Work&amp;url=https%3a%2f%2fnathanchance.dev%2fposts%2fmay-2021-cbl-work%2f">
        <svg version="1.1" xml:space="preserve" viewBox="2 2 28 28">
            <path
                d="M26.49,29.86H5.5a3.37,3.37,0,0,1-2.47-1,3.35,3.35,0,0,1-1-2.47V5.48A3.36,3.36,0,0,1,3,3,3.37,3.37,0,0,1,5.5,2h21A3.38,3.38,0,0,1,29,3a3.36,3.36,0,0,1,1,2.46V26.37a3.35,3.35,0,0,1-1,2.47A3.38,3.38,0,0,1,26.49,29.86Zm-5.38-6.71a.79.79,0,0,0,.85-.66L24.73,9.24a.55.55,0,0,0-.18-.46.62.62,0,0,0-.41-.17q-.08,0-16.53,6.11a.59.59,0,0,0-.41.59.57.57,0,0,0,.43.52l4,1.24,1.61,4.83a.62.62,0,0,0,.63.43.56.56,0,0,0,.4-.17L16.54,20l4.09,3A.9.9,0,0,0,21.11,23.15ZM13.8,20.71l-1.21-4q8.72-5.55,8.78-5.55c.15,0,.23,0,.23.16a.18.18,0,0,1,0,.06s-2.51,2.3-7.52,6.8Z" />
        </svg>
    </a>
</div>

  </footer><div id="disqus_thread"></div>
<script>
    

    

    (function() { 
    var d = document, s = d.createElement('script');
    s.src = 'https://nathanchance.disqus.com/embed.js';
    s.setAttribute('data-timestamp', +new Date());
    (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</article>
    </main>
    
<footer class="footer">
    <span>&copy; 2022 <a href="https://nathanchance.dev/">Nathan Chancellor</a></span>
    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://git.io/hugopapermod" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerText = 'copy';

        function copyingDone() {
            copybutton.innerText = 'copied!';
            setTimeout(() => {
                copybutton.innerText = 'copy';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script>
</body>

</html>
