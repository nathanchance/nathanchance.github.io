<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="ie=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="author" content="Nathan Chancellor ">
<meta name="description" content="Recently, I stumbled upon a talk that Alistair Delva, a Google engineer, gave at the 2018 Linux Plumbers Conference around Cuttlefish, an Android Virtual Device (AVD) that is used to validate the Android platform virtually (i.e. without a separate device). This is something that is really cool because it makes it easy to follow along with upstream Android development and see what changes they are making under the hood, all from adb shell." />
<meta name="keywords" content=", android, clang, linux" />
<meta name="robots" content="noodp" />
<meta name="theme-color" content="" />
<link rel="canonical" href="https://nathanchance.dev/posts/building-using-cuttlefish/" />


    <title>
        
            Building and using Cuttlefish :: Nathan Chancellor 
        
    </title>



<link href="https://cdnjs.cloudflare.com/ajax/libs/flag-icon-css/3.5.0/css/flag-icon.min.css" rel="stylesheet"
    type="text/css">



<link rel="stylesheet" href="/main.031a8efc33f94f55a4071bf4e91596478a5809fc8c148fab113801189cfd2152.css">






<meta itemprop="name" content="Building and using Cuttlefish">
<meta itemprop="description" content="Recently, I stumbled upon a talk that Alistair Delva, a Google engineer, gave at the 2018 Linux Plumbers Conference around Cuttlefish, an Android Virtual Device (AVD) that is used to validate the Android platform virtually (i.e. without a separate device). This is something that is really cool because it makes it easy to follow along with upstream Android development and see what changes they are making under the hood, all from adb shell."><meta itemprop="datePublished" content="2020-01-31T18:52:00-07:00" />
<meta itemprop="dateModified" content="2020-01-31T18:52:00-07:00" />
<meta itemprop="wordCount" content="2672"><meta itemprop="image" content="https://nathanchance.dev/"/>
<meta itemprop="keywords" content="android,clang,linux," />
<meta name="twitter:card" content="summary_large_image"/>
<meta name="twitter:image" content="https://nathanchance.dev/"/>

<meta name="twitter:title" content="Building and using Cuttlefish"/>
<meta name="twitter:description" content="Recently, I stumbled upon a talk that Alistair Delva, a Google engineer, gave at the 2018 Linux Plumbers Conference around Cuttlefish, an Android Virtual Device (AVD) that is used to validate the Android platform virtually (i.e. without a separate device). This is something that is really cool because it makes it easy to follow along with upstream Android development and see what changes they are making under the hood, all from adb shell."/>








    <meta property="article:published_time" content="2020-01-31 18:52:00 -0700 -0700" />










    </head>

    
        <body>
    
    
        <div class="container">
            <header class="header">
    <span class="header__inner">
        <a href="/" style="text-decoration: none;">
    <div class="logo">
        
            <span class="logo__mark">></span>
            <span class="logo__text">nathanchance.dev</span>
            <span class="logo__cursor" style=
                  "
                   
                   ">
            </span>
        
    </div>
</a>


        <span class="header__right">
            
                <nav class="menu">
    <ul class="menu__inner"><li><a href="/about">About</a></li><li><a href="/posts">Blog</a></li><li><a href="/nc_resume.pdf">Resume</a></li><li><a href="/downloads">Downloads</a></li>
    </ul>
</nav>

                <span class="menu-trigger">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                        <path d="M0 0h24v24H0z" fill="none"/>
                        <path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/>
                    </svg>
                </span>
            
                <span class="theme-toggle not-selectable"><svg class="theme-toggler" width="24" height="24" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">
   <path d="M22 41C32.4934 41 41 32.4934 41 22C41 11.5066 32.4934 3 22
   3C11.5066 3 3 11.5066 3 22C3 32.4934 11.5066 41 22 41ZM7 22C7
   13.7157 13.7157 7 22 7V37C13.7157 37 7 30.2843 7 22Z"/>
 </svg></span>
        </span>
    </span>
</header>


            <div class="content">
                
  <main class="post">

    <div class="post-info">
      <p>
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-clock">
          <circle cx="12" cy="12" r="10"></circle>
          <polyline points="12 6 12 12 16 14"></polyline>
        </svg>
        13 minutes

        
      </p>
    </div>

    <article>
      <h1 class="post-title">
        <a href="https://nathanchance.dev/posts/building-using-cuttlefish/">Building and using Cuttlefish</a>
      </h1>

      

      

      

      <div class="post-content">
        <p>Recently, I stumbled upon <a href="https://youtu.be/xMtDDEj-02c?t=9502">a talk</a> that Alistair Delva, a Google engineer, gave at the 2018 Linux Plumbers Conference around Cuttlefish, an Android Virtual Device (AVD) that is used to validate the Android platform virtually (i.e. without a separate device). This is something that is really cool because it makes it easy to follow along with upstream Android development and see what changes they are making under the hood, all from <code>adb shell</code>. Cuttlefish boots in around 20 seconds on my machine and swapping out kernels is as simple as adding two command flags which I will go over later. If you are running Cuttlefish locally, you can even <a href="https://android.googlesource.com/device/google/cuttlefish/#so-you-want-to-see-cuttlefish">view it</a> with TightVNC.</p>
<p>A brief demo:</p>
<p><a href="https://asciinema.org/a/tfDhVZKCL0URqP58lnxuRsKZd"><img src="https://asciinema.org/a/tfDhVZKCL0URqP58lnxuRsKZd.svg" alt="asciicast"></a></p>
<p>A few things to note:</p>
<ol>
<li>
<p>These commands assume that you understand Linux shell commands and structure; do not blindly copy and paste (even though everything should work without any issues). If you have any questions about what something is specifically doing and I did not make it clear enough here, feel free to reach out to me on Twitter (link on my homepage).</p>
</li>
<li>
<p>All of the commands are specifically for Ubuntu. This is the OS that I use with my <a href="https://www.packet.com/">Packet</a> servers and all that I really test on. I tested both <code>bash</code> and <code>zsh</code> without any issues. Debian <em>should</em> work but since we are dealing with fairly low level stuff like KVM, there might be minor differences that are not accounted for here.</p>
</li>
</ol>
<h2 id="1-getting-cuttlefish-running">1. Getting Cuttlefish running</h2>
<p>The first thing to do is actually get the images and tools we need downloaded and installed. This has mostly been distilled from <a href="https://android.googlesource.com/device/google/cuttlefish/#so-you-want-to-try-cuttlefish">the official README</a>. Cuttlefish uses KVM for performance so your device must support virtualization. See <a href="http://www.linux-kvm.org/page/Processor_support">this page</a> for how to determine that and consult Google for how to enable it in your BIOS if it is not already.</p>
<p>To start, we need to grab a bunch of packages that are essential to this process:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ sudo apt install -y build-essential devscripts fakeroot git psmisc qemu-kvm unzip zip
</code></pre></div><p>Next, we will make a folder to contain all of the work we are doing. This can be anywhere but you will need to adjust the rest of the commands for wherever you put it.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ mkdir -p <span style="color:#e6db74">&#34;</span><span style="color:#e6db74">${</span>HOME<span style="color:#e6db74">}</span><span style="color:#e6db74">&#34;</span>/cuttlefish-playground/src
</code></pre></div><p>After this, we will clone the android-cuttlefish repo locally. This will configure and install some tools that are necessary to boot Cuttlefish. Most of these tools are for development, the main reason to install this package is to get the groups that Cuttlefish needs configured properly. There is also the option of using a Docker image to do this but when I tried to use it, I could not get it to work.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ git clone https://github.com/google/android-cuttlefish <span style="color:#e6db74">&#34;</span><span style="color:#e6db74">${</span>HOME<span style="color:#e6db74">}</span><span style="color:#e6db74">&#34;</span>/cuttlefish-playground/src/android-cuttlefish
$ cd <span style="color:#e6db74">&#34;</span><span style="color:#e6db74">${</span>HOME<span style="color:#e6db74">}</span><span style="color:#e6db74">&#34;</span>/cuttlefish-playground/src/android-cuttlefish
</code></pre></div><p>Once the repo has been successfully cloned, we need to install a couple of prerequisite packages specifically for this package we are about to build.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ sudo apt install -y cdbs config-package-dev debhelper
</code></pre></div><p>After those have been installed, we will build the package:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ debuild -i -us -uc -b
</code></pre></div><p>The package should have built successfully. If it did not, see if it says a package is missing or try Googling the error to get it resolved. Once it is built, try to install it.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ sudo dpkg -i ../cuttlefish-common_*_amd64.deb
</code></pre></div><p>That step will fail. The packages that it depends on can be installed along with it by running the following command:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ sudo apt-get install -f -y
</code></pre></div><p>Once it gets installed successfully, the <code>cuttlefish-*</code> packages can be removed to avoid cluttering up the workspace.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ rm ../cuttlefish-*
</code></pre></div><p>After this, we need to add our user to the <code>cvdnetwork</code> and <code>kvm</code> network so that Cuttlefish is allowed to use KVM to boot and configure its network using vsock.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ sudo usermod -aG cvdnetwork <span style="color:#e6db74">&#34;</span><span style="color:#e6db74">${</span>USER<span style="color:#e6db74">}</span><span style="color:#e6db74">&#34;</span>
$ sudo usermod -aG kvm <span style="color:#e6db74">&#34;</span><span style="color:#e6db74">${</span>USER<span style="color:#e6db74">}</span><span style="color:#e6db74">&#34;</span>
</code></pre></div><p>Once that is done, logout and log back in (or reboot your machine if it is a remote server).</p>
<p>After logging back in, we need to grab prebuilt versions of the Cuttlefish host tools (such as the <code>launch_cvd</code> and <code>stop_cvd</code> commands) as well as the filesystem images, much like a regular Android device, which include <code>super.img</code>, <code>vendor.img</code>, and <code>boot.img</code>. I will show you how to build these from source if you ever want to hack on Cuttlefish later.</p>
<p>We will first create an area for all of this to exist.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ mkdir -p <span style="color:#e6db74">&#34;</span><span style="color:#e6db74">${</span>HOME<span style="color:#e6db74">}</span><span style="color:#e6db74">&#34;</span>/cuttlefish-playground/cuttlefish-fs
$ cd <span style="color:#e6db74">&#34;</span><span style="color:#e6db74">${</span>HOME<span style="color:#e6db74">}</span><span style="color:#e6db74">&#34;</span>/cuttlefish-playground/cuttlefish-fs
</code></pre></div><p>The files we need are all available from <a href="https://ci.android.com">ci.android.com</a>. There will be a LOT of different options, the one we care about is currently the second column: <code>aosp_cf_x86_phone</code>. If you click on the <strong>userdebug</strong> button, it will automatically give you the last known good build. From there, click on the button with the arrow then click on <strong>Artifacts</strong>. The files we need to download are <code>aosp_cf_x86_phone-img-*.zip</code> and <code>cvd-host_package.tar.gz</code>.</p>
<p>This one-liner will grab the zip, unzip it, and remove it. I recommend using the latest, known good build, instead of the one that I have linked here.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ curl -LSsO https://ci.android.com/builds/submitted/6173731/aosp_cf_x86_phone-userdebug/latest/aosp_cf_x86_phone-img-6173731.zip <span style="color:#f92672">&amp;&amp;</span> <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>unzip *.zip <span style="color:#f92672">&amp;&amp;</span> <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>rm *.zip
</code></pre></div><p>This one-liner will grab the host tools and untar it.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ curl -LSs https://ci.android.com/builds/submitted/6173731/aosp_cf_x86_phone-userdebug/latest/cvd-host_package.tar.gz | tar -xzf -
</code></pre></div><p>Once those have finished downloading, we are ready to run Cuttlefish! We start Cuttlefish using the <code>launch_cvd</code> (Launch Cuttlefish Virtual Device).</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ HOME<span style="color:#f92672">=</span><span style="color:#e6db74">${</span>PWD<span style="color:#e6db74">}</span> ./bin/launch_cvd -daemon
</code></pre></div><p>The <code>HOME=${PWD}</code> is present so that some Cuttlefish runtime files get contained to this folder. The <code>-daemon</code> flag is so that we can interact with Cuttlefish through <code>adb shell</code> in the same terminal window (i.e. it gets sent to the background). You should see a bunch of text fire up then it end with something like:</p>
<pre tabindex="0"><code>run_cvd I 01-31 20:07:50  9571  9571 main.cc:198] VIRTUAL_DEVICE_BOOT_COMPLETED
launch_cvd I 01-31 20:07:50  9543  9543 launch_cvd.cc:131] run_cvd exited successfully.
</code></pre><p>It takes about 20 seconds for Cuttlefish to boot up for me (which is extremely impressive in my opinion). After that, you can run <code>adb</code> to connect to it. You might need to run the command a couple of times so that <code>adb</code> can start and connect to the device but once you do, you should be able to interact with it like any other Android device.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ ./bin/adb shell
vsoc_x86:/ $
</code></pre></div><p>I like to see what kernel it is running, which at this point is the <code>android-5.4</code> branch, the latest LTS kernel.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">vsoc_x86:/ $ cat /proc/version
Linux version 5.4.15-gb2b96d09ef40 <span style="color:#f92672">(</span>android-build@abfarm-01061<span style="color:#f92672">)</span> <span style="color:#f92672">(</span>Android <span style="color:#f92672">(</span><span style="color:#ae81ff">6051079</span> based on r370808<span style="color:#f92672">)</span> clang version 10.0.1 <span style="color:#f92672">(</span>https://android.googlesource.com/toolchain/llvm-project b9738d6d99f614c8bf7a3e7c769659b313b88244<span style="color:#f92672">))</span> <span style="color:#75715e">#1 SMP PREEMPT Mon Jan 27 13:04:43 UTC 2020</span>
</code></pre></div><p>You can see that it actively running tasks by typing in <code>top</code>. Once you are done exploring and want to move on, shutdown this instance by calling <code>stop_cvd</code>:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ HOME<span style="color:#f92672">=</span><span style="color:#e6db74">${</span>PWD<span style="color:#e6db74">}</span> ./bin/stop_cvd
</code></pre></div><h2 id="2-building-your-own-kernel">2. Building your own kernel</h2>
<p>Now that we have gotten Cuttlefish running, it&rsquo;s time to explore one of the main reasons that I use it, which is validating Android kernels. Android has cool technologies in the kernel such as LTO and CFI, which are not currently in mainline. Replacing Cuttlefish&rsquo;s prebuilt kernel is extremely easy, which is one of the main selling points; it makes it really easy for kernel hackers to get involved with it, especially with Google&rsquo;s kernel build system. This section is expanded from <a href="https://source.android.com/setup/build/building-kernels">Google&rsquo;s official documentation</a>.</p>
<p>First, we need to do is grab <code>repo</code>, Google&rsquo;s <code>git</code> management tool. If you already have <code>repo</code> installed, just skip this portion. Alternatively, you can install <code>repo</code> into <code>/usr/local/bin</code> so that it is automatically added to <code>PATH</code> but for the sake of this tutorial, I keep everything localized as much as possible.</p>
<p>Create a <code>bin</code> folder within the Cuttlefish area.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ mkdir -p <span style="color:#e6db74">&#34;</span><span style="color:#e6db74">${</span>HOME<span style="color:#e6db74">}</span><span style="color:#e6db74">&#34;</span>/cuttlefish-playground/bin
</code></pre></div><p>Download <code>repo</code> into the <code>bin</code> folder.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ curl -LSso <span style="color:#e6db74">&#34;</span><span style="color:#e6db74">${</span>HOME<span style="color:#e6db74">}</span><span style="color:#e6db74">&#34;</span>/cuttlefish-playground/bin/repo https://storage.googleapis.com/git-repo-downloads/repo
</code></pre></div><p>Make it executable.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ chmod a+x <span style="color:#e6db74">&#34;</span><span style="color:#e6db74">${</span>HOME<span style="color:#e6db74">}</span><span style="color:#e6db74">&#34;</span>/cuttlefish-playground/bin/repo
</code></pre></div><p>Add the <code>bin</code> folder to <code>PATH</code> (NOTE: If you close out of your terminal session or start a new one, you will need to do this everytime):</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ export PATH<span style="color:#f92672">=</span><span style="color:#e6db74">${</span>HOME<span style="color:#e6db74">}</span>/cuttlefish-playground/bin:<span style="color:#e6db74">${</span>PATH<span style="color:#e6db74">}</span>
</code></pre></div><p>If you have not already configured <code>git</code> with your email address and your full name, do so now:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ git config --global user.email <span style="color:#e6db74">&#34;you@domain.com&#34;</span>
$ git config --global user.name <span style="color:#e6db74">&#34;Your Name
</span></code></pre></div><p>After all of this has been configured, we are going to download the kernel source. Depending on your internet speed, this might take some time.</p>
<p>We will create a folder for that source to be saved in. This will also download all of the prebuilt tools we need, such as the compiler and binaries used during the build process.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ mkdir -p <span style="color:#e6db74">&#34;</span><span style="color:#e6db74">${</span>HOME<span style="color:#e6db74">}</span><span style="color:#e6db74">&#34;</span>/cuttlefish-playground/kernel-common
$ cd <span style="color:#e6db74">&#34;</span><span style="color:#e6db74">${</span>HOME<span style="color:#e6db74">}</span><span style="color:#e6db74">&#34;</span>/cuttlefish-playground/kernel-common
</code></pre></div><p>Next, we will download the source. I am using the <code>common-android-mainline</code> branch since it is the latest available and where most of the new development happens but you can use <code>common-android-5.4</code> or <code>common-android-4.19</code> branches if you would like. Any time that you want to get the latest new changes, you can just run <code>repo sync</code>.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ repo init -u https://android.googlesource.com/kernel/manifest -b common-android-mainline
$ repo sync
</code></pre></div><p>Once it is done downloading, we need to make sure that we have the SSL development headers installed, otherwise our build will error out. Google&rsquo;s build is almost heremetic, except for this:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ sudo apt install -y libssl-dev
</code></pre></div><p>Finally, we are ready to build the kernel. Google&rsquo;s build script takes care of everything as long as we specify a build config, which is <code>build.config.cuttlefish.x86_64</code> in our case. We need to copy the <code>bzImage</code> into the <code>dist</code> folder because Google&rsquo;s <code>build.config.cuttlefish.x86_64</code> is only intended to save the <code>initramfs.img</code>; however, the <code>build.config.gki.x86_64</code> is about to be fully demodularized and we are eventually going to use a different compiler than Google&rsquo;s official one, which will create a mismatch. As a result, we need to do that copy on our own (it isn&rsquo;t strictly necessary, it just makes everything end up in the right spot).</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ BUILD_CONFIG<span style="color:#f92672">=</span>common/build.config.cuttlefish.x86_64 ./build/build.sh
$ cp out/android-mainline/common/arch/x86/boot/bzImage out/android-mainline/dist/bzImage
</code></pre></div><p>Once it is done building, we can use that kernel and ramdisk to boot from. <code>launch_cvd</code> has two flags we need to use, <code>-initramfs_path</code> (for the ramdisk that has all of the kernel modules) and <code>-kernel_path</code> for the actual kernel binary. These two files are available in the <code>out/&lt;branch&gt;/dist</code> folder (e.g., <code>out/android-mainline/dist</code>). I would recommend exporting this to a variable that can be easily used later.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ DIST_FOLDER<span style="color:#f92672">=</span><span style="color:#66d9ef">$(</span>readlink -f out/android-mainline/dist<span style="color:#66d9ef">)</span>
</code></pre></div><p>Once you do that, we will move back to the <code>cuttlefish-fs</code> folder and use these freshly built files to boot Cuttlefish from:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ cd <span style="color:#e6db74">&#34;</span><span style="color:#e6db74">${</span>HOME<span style="color:#e6db74">}</span><span style="color:#e6db74">&#34;</span>/cuttlefish-playground/cuttlefish-fs
$ HOME<span style="color:#f92672">=</span><span style="color:#e6db74">${</span>PWD<span style="color:#e6db74">}</span> ./bin/launch_cvd -daemon -initramfs_path <span style="color:#e6db74">&#34;</span><span style="color:#e6db74">${</span>DIST_FOLDER<span style="color:#e6db74">}</span><span style="color:#e6db74">&#34;</span>/initramfs.img -kernel_path <span style="color:#e6db74">&#34;</span><span style="color:#e6db74">${</span>DIST_FOLDER<span style="color:#e6db74">}</span><span style="color:#e6db74">&#34;</span>/bzImage
</code></pre></div><p>After that, we can use <code>adb shell</code> to see that we indeed used our own kernel since it shows a newer version, different user/hostname, and the repo that we used and that all of the modules properly loaded.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ ./bin/adb shell
vsoc_x86:/ $ cat /proc/version
Linux version 5.5.0-mainline-03266-g1dad8acc36fc <span style="color:#f92672">(</span>nathan@g2-large-x86<span style="color:#f92672">)</span> <span style="color:#f92672">(</span>Android <span style="color:#f92672">(</span><span style="color:#ae81ff">6051079</span> based on r370808<span style="color:#f92672">)</span> clang version 10.0.1 <span style="color:#f92672">(</span>https://android.googlesource.com/toolchain/llvm-project b9738d6d99f614c8bf7a3e7c769659b313b88244<span style="color:#f92672">))</span> <span style="color:#75715e">#1 repo:common-android-mainline SMP PREEMPT Fri Jan 31 21:42:55</span>
vsoc_x86:/ $ lsmod
Module                  Size  Used by
vsock_loopback         <span style="color:#ae81ff">16384</span>  <span style="color:#ae81ff">0</span>
vmw_vsock_virtio_transport    <span style="color:#ae81ff">24576</span>  <span style="color:#ae81ff">3</span>
vmw_vsock_virtio_transport_common    <span style="color:#ae81ff">36864</span>  <span style="color:#ae81ff">2</span> vsock_loopback,vmw_vsock_virtio_transport
vsock_diag             <span style="color:#ae81ff">16384</span>  <span style="color:#ae81ff">0</span>
vsock                  <span style="color:#ae81ff">53248</span>  <span style="color:#ae81ff">16</span> vsock_loopback,vmw_vsock_virtio_transport,vmw_vsock_virtio_transport_common,vsock_diag
can_raw                <span style="color:#ae81ff">20480</span>  <span style="color:#ae81ff">0</span>
can                    <span style="color:#ae81ff">28672</span>  <span style="color:#ae81ff">1</span> can_raw
snd_intel8x0           <span style="color:#ae81ff">45056</span>  <span style="color:#ae81ff">1</span>
snd_ac97_codec        <span style="color:#ae81ff">229376</span>  <span style="color:#ae81ff">1</span> snd_intel8x0
ac97_bus               <span style="color:#ae81ff">16384</span>  <span style="color:#ae81ff">1</span> snd_ac97_codec
virtio_input           <span style="color:#ae81ff">20480</span>  <span style="color:#ae81ff">0</span>
virtio_pci             <span style="color:#ae81ff">28672</span>  <span style="color:#ae81ff">0</span>
virtio_mmio            <span style="color:#ae81ff">20480</span>  <span style="color:#ae81ff">0</span>
gnss_cmdline           <span style="color:#ae81ff">16384</span>  <span style="color:#ae81ff">0</span>
gnss_serial            <span style="color:#ae81ff">16384</span>  <span style="color:#ae81ff">1</span> gnss_cmdline
virtio_crypto          <span style="color:#ae81ff">28672</span>  <span style="color:#ae81ff">0</span>
dummy_cpufreq          <span style="color:#ae81ff">16384</span>  <span style="color:#ae81ff">0</span>
rtc_test               <span style="color:#ae81ff">16384</span>  <span style="color:#ae81ff">1</span>
dummy_hcd              <span style="color:#ae81ff">32768</span>  <span style="color:#ae81ff">0</span>
can_dev                <span style="color:#ae81ff">32768</span>  <span style="color:#ae81ff">0</span>
vcan                   <span style="color:#ae81ff">16384</span>  <span style="color:#ae81ff">0</span>
virtio_net             <span style="color:#ae81ff">53248</span>  <span style="color:#ae81ff">0</span>
net_failover           <span style="color:#ae81ff">24576</span>  <span style="color:#ae81ff">1</span> virtio_net
failover               <span style="color:#ae81ff">16384</span>  <span style="color:#ae81ff">1</span> net_failover
virt_wifi              <span style="color:#ae81ff">24576</span>  <span style="color:#ae81ff">1</span>
virtio_pmem            <span style="color:#ae81ff">16384</span>  <span style="color:#ae81ff">1</span>
nd_virtio              <span style="color:#ae81ff">16384</span>  <span style="color:#ae81ff">1</span> virtio_pmem
virtio_blk             <span style="color:#ae81ff">24576</span>  <span style="color:#ae81ff">5</span>
virtio_gpu             <span style="color:#ae81ff">57344</span>  <span style="color:#ae81ff">0</span>
virtio_console         <span style="color:#ae81ff">36864</span>  <span style="color:#ae81ff">0</span>
virtio_rng             <span style="color:#ae81ff">16384</span>  <span style="color:#ae81ff">0</span>
virtio_ring            <span style="color:#ae81ff">36864</span>  <span style="color:#ae81ff">11</span> vmw_vsock_virtio_transport,virtio_input,virtio_pci,virtio_mmio,virtio_crypto,virtio_net,nd_virtio,virtio_blk,virtio_gpu,virtio_console,virtio_rng
virtio                 <span style="color:#ae81ff">24576</span>  <span style="color:#ae81ff">11</span> vmw_vsock_virtio_transport,virtio_input,virtio_pci,virtio_mmio,virtio_crypto,virtio_net,virtio_pmem,virtio_blk,virtio_gpu,virtio_console,virtio_rng
blk_mq_virtio          <span style="color:#ae81ff">16384</span>  <span style="color:#ae81ff">1</span> virtio_blk
binfmt_misc            <span style="color:#ae81ff">20480</span>  <span style="color:#ae81ff">0</span>
</code></pre></div><p>Once you are done exploring, stop Cuttlefish.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ HOME<span style="color:#f92672">=</span><span style="color:#e6db74">${</span>PWD<span style="color:#e6db74">}</span> ./bin/stop_cvd
</code></pre></div><h2 id="3-using-upstream-llvm">3. Using upstream LLVM</h2>
<p>One of my hobbies is contributing to <a href="https://github.com/ClangBuiltLinux">ClangBuiltLinux</a>, which involves building various Linux kernels with the master version of Clang (11.0.0 at the time of writing this). As a part of that project, I have developed a script that can build a self-contained version of Clang suitable for building kernels. These steps will show you how to build that version of Clang then use it within the Android build system.</p>
<p>First, we need to install some packages that allow us build Clang efficiently (including Clang itself):</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ sudo apt install -y bc bison ccache clang cmake flex libelf-dev lld ninja-build python3 u-boot-tools zlib1g-dev
</code></pre></div><p>Next, we&rsquo;ll grab the repo that contains the Python script:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ git clone git://github.com/ClangBuiltLinux/tc-build <span style="color:#e6db74">&#34;</span><span style="color:#e6db74">${</span>HOME<span style="color:#e6db74">}</span><span style="color:#e6db74">&#34;</span>/cuttlefish-playground/src/tc-build
</code></pre></div><p>By default, the script does a two stage LLVM build (builds a small version of LLVM then uses that to build a full version of LLVM).</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ <span style="color:#e6db74">&#34;</span><span style="color:#e6db74">${</span>HOME<span style="color:#e6db74">}</span><span style="color:#e6db74">&#34;</span>/cuttlefish-playground/src/tc-build/build-llvm.py
</code></pre></div><p>If for some reason your machine cannot handle that, you can just do a stage 1 build.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ <span style="color:#e6db74">&#34;</span><span style="color:#e6db74">${</span>HOME<span style="color:#e6db74">}</span><span style="color:#e6db74">&#34;</span>/cuttlefish-playground/src/tc-build/build-llvm.py --build-stage1-only --install-stage1-only
</code></pre></div><p>If you have a machine with good performance, I would recommend using the <code>--pgo</code> flag to build with Profile Guided Optimization; this can result in a 20% speed up when compiling kernels.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ <span style="color:#e6db74">&#34;</span><span style="color:#e6db74">${</span>HOME<span style="color:#e6db74">}</span><span style="color:#e6db74">&#34;</span>/cuttlefish-playground/src/tc-build/build-llvm.py --pgo
</code></pre></div><p>If for some reason there are any issues using the script, please report them <a href="https://github.com/ClangBuiltLinux/tc-build/issues">here</a> so I can triage them.</p>
<p>Once the toolchain has been built, we will make it available to easily use by symlinking the <code>install</code> folder within <code>tc-build</code> into the <code>prebuilts</code> folder in <code>kernel-common</code>.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ ln -s <span style="color:#e6db74">&#34;</span><span style="color:#e6db74">${</span>HOME<span style="color:#e6db74">}</span><span style="color:#e6db74">&#34;</span>/cuttlefish-playground/src/tc-build/install <span style="color:#e6db74">&#34;</span><span style="color:#e6db74">${</span>HOME<span style="color:#e6db74">}</span><span style="color:#e6db74">&#34;</span>/cuttlefish-playground/kernel-common/prebuilts-master/clang/host/linux-x86/cbl-clang-master
</code></pre></div><p>After that, we can use <code>sed</code> to automatically use that Clang when building the kernel.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ cd <span style="color:#e6db74">&#34;</span><span style="color:#e6db74">${</span>HOME<span style="color:#e6db74">}</span><span style="color:#e6db74">&#34;</span>/cuttlefish-playground/kernel-common
$ sed -i <span style="color:#e6db74">&#39;s/clang-r.*/cbl-clang-master\/bin/g&#39;</span> common/build.config.common
$ BUILD_CONFIG<span style="color:#f92672">=</span>common/build.config.cuttlefish.x86_64 ./build/build.sh
$ cp out/android-mainline/common/arch/x86/boot/bzImage out/android-mainline/dist/bzImage
</code></pre></div><p>Once the build is completed, we just use the same commands as before to boot and test:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ DIST_FOLDER<span style="color:#f92672">=</span><span style="color:#66d9ef">$(</span>readlink -f out/android-mainline/dist<span style="color:#66d9ef">)</span>
$ cd <span style="color:#e6db74">&#34;</span><span style="color:#e6db74">${</span>HOME<span style="color:#e6db74">}</span><span style="color:#e6db74">&#34;</span>/cuttlefish-playground/cuttlefish-fs
$ HOME<span style="color:#f92672">=</span><span style="color:#e6db74">${</span>PWD<span style="color:#e6db74">}</span> ./bin/launch_cvd -daemon -initramfs_path <span style="color:#e6db74">&#34;</span><span style="color:#e6db74">${</span>DIST_FOLDER<span style="color:#e6db74">}</span><span style="color:#e6db74">&#34;</span>/initramfs.img -kernel_path <span style="color:#e6db74">&#34;</span><span style="color:#e6db74">${</span>DIST_FOLDER<span style="color:#e6db74">}</span><span style="color:#e6db74">&#34;</span>/bzImage
$ ./bin/adb shell
vsoc_x86:/ $ cat /proc/version
Linux version 5.5.0-mainline-03266-g1dad8acc36fc-dirty <span style="color:#f92672">(</span>nathan@g2-large-x86<span style="color:#f92672">)</span> <span style="color:#f92672">(</span>ClangBuiltLinux clang version 11.0.0 <span style="color:#f92672">(</span>git://github.com/llvm/llvm-project 64cb77b9469207799e570483dadc720dbf12c794<span style="color:#f92672">))</span> <span style="color:#75715e">#1 repo:common-android-mainline SMP PREEMPT Fri Jan 31 23:47:57</span>
vsoc_x86:/ $ exit
$ HOME<span style="color:#f92672">=</span><span style="color:#e6db74">${</span>PWD<span style="color:#e6db74">}</span> ./bin/stop_cvd
</code></pre></div><h2 id="4-building-cuttlefish-userspace-from-scratch">4. Building Cuttlefish userspace from scratch</h2>
<p>If you want to test the latest and greatest from AOSP&rsquo;s master branch, you can build the things that are in the <code>cuttlefish-fs</code> folder from scratch.</p>
<p>This is not small so make sure that you have room on your hard drive for it. A fresh checkout as of today shows:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ diskus .
92.68 GB <span style="color:#f92672">(</span>92,677,562,368 bytes<span style="color:#f92672">)</span>
</code></pre></div><p>First, use <code>repo</code> to go and grab the full AOSP source tree.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ mkdir -p <span style="color:#e6db74">&#34;</span><span style="color:#e6db74">${</span>HOME<span style="color:#e6db74">}</span><span style="color:#e6db74">&#34;</span>/cuttlefish-playground/src/aosp
$ cd <span style="color:#e6db74">&#34;</span><span style="color:#e6db74">${</span>HOME<span style="color:#e6db74">}</span><span style="color:#e6db74">&#34;</span>/cuttlefish-playground/src/aosp
$ repo init -u https://android.googlesource.com/platform/manifest
$ repo sync
</code></pre></div><p>Next, we need source Android&rsquo;s environment setup script to adjust the PATH variable and add the functions that it uses.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ . build/envsetup.sh
</code></pre></div><p>After that, we need to use the <code>lunch</code> command to tell the build system that we want to build Cuttlefish.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ lunch aosp_cf_x86_phone-userdebug
</code></pre></div><p>Next, we&rsquo;re just going to build the world:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ m
</code></pre></div><p>This will probably take a while since there are usually around 80,000+ files to build. A clean build on <a href="https://www.packet.com/cloud/servers/g2-large/">g2.large.x86</a> takes about 38 minutes.</p>
<p>Once it is done, you can use the <code>launch_cvd</code> command available in <code>PATH</code> to use the new files you just build. The <code>HOME=</code> assignment should still be used to keep the Cuttlefish runtime files contained but I will keep them in the <code>out</code> folder.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ HOME<span style="color:#f92672">=</span><span style="color:#e6db74">${</span>PWD<span style="color:#e6db74">}</span>/out launch_cvd -daemon
</code></pre></div><p>Once it has booted, you can access with the <code>adb</code> that is in the path.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ adb shell
vsoc_x86:/ $ cat /proc/version
Linux version 5.4.15-gb2b96d09ef40 <span style="color:#f92672">(</span>android-build@abfarm-01061<span style="color:#f92672">)</span> <span style="color:#f92672">(</span>Android <span style="color:#f92672">(</span><span style="color:#ae81ff">6051079</span> based on r370808<span style="color:#f92672">)</span> clang version 10.0.1 <span style="color:#f92672">(</span>https://android.googlesource.com/toolchain/llvm-project b9738d6d99f614c8bf7a3e7c769659b313b88244<span style="color:#f92672">))</span> <span style="color:#75715e">#1 SMP PREEMPT Mon Jan 27 13:04:43 UTC 2020</span>
</code></pre></div><p>The kernel is still prebuilt but you can use a kernel that you build earlier with this new userspace just like before.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ HOME<span style="color:#f92672">=</span><span style="color:#e6db74">${</span>PWD<span style="color:#e6db74">}</span>/out launch_cvd -daemon -initramfs_path <span style="color:#e6db74">&#34;</span><span style="color:#e6db74">${</span>DIST_FOLDER<span style="color:#e6db74">}</span><span style="color:#e6db74">&#34;</span>/initramfs.img -kernel_path <span style="color:#e6db74">&#34;</span><span style="color:#e6db74">${</span>DIST_FOLDER<span style="color:#e6db74">}</span><span style="color:#e6db74">&#34;</span>/bzImage
$ adb shell
vsoc_x86:/ $ cat /proc/version
Linux version 5.5.0-mainline-03266-g1dad8acc36fc-dirty <span style="color:#f92672">(</span>nathan@g2-large-x86<span style="color:#f92672">)</span> <span style="color:#f92672">(</span>ClangBuiltLinux clang version 11.0.0 <span style="color:#f92672">(</span>git://github.com/llvm/llvm-project 64cb77b9469207799e570483dadc720dbf12c794<span style="color:#f92672">))</span> <span style="color:#75715e">#1 repo:common-android-mainline SMP PREEMPT Fri Jan 31 23:47:57</span>
</code></pre></div><h1 id="conclusion">Conclusion</h1>
<p>Hopefully this was informative for you! Some further things to potentially explore are things like <a href="https://github.com/joelagnel/adeb">adeb</a>, which allow you to use tracing tools and other Linux utilities on Android to poke around its internals and try and improve or break things or looking into some of the new cool things they are doing like Apex. If you have any questions or problems, feel free to reach out to me on Twitter or GitHub, both of which are linked on my homepage.</p>

      </div>
    </article>

    <hr />

    <div class="post-info">
      
    <p>
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-tag meta-icon"><path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"></path><line x1="7" y1="7" x2="7" y2="7"></line></svg>

        <span class="tag"><a href="https://nathanchance.dev/tags/android/">android</a></span>
        <span class="tag"><a href="https://nathanchance.dev/tags/clang/">clang</a></span>
        <span class="tag"><a href="https://nathanchance.dev/tags/linux/">linux</a></span>
        
    </p>

      

      <p>
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file-text">
          <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
          <polyline points="14 2 14 8 20 8"></polyline>
          <line x1="16" y1="13" x2="8" y2="13"></line>
          <line x1="16" y1="17" x2="8" y2="17"></line>
          <polyline points="10 9 9 9 8 9"></polyline>
        </svg>
        2672 Words
      </p>

      <p>
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-calendar">
          <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
          <line x1="16" y1="2" x2="16" y2="6"></line>
          <line x1="8" y1="2" x2="8" y2="6"></line>
          <line x1="3" y1="10" x2="21" y2="10"></line>
        </svg>
        
          2020-01-31 17:52 -0800
        

         
          
        
      </p>
    </div>

    
    <div class="pagination">
        <div class="pagination__title">
            <span class="pagination__title-h">Read other posts</span>
            <hr />
        </div>

        <div class="pagination__buttons">
            
            <span class="button previous">
                <a href="https://nathanchance.dev/posts/wsl2-distros-from-lxc-images/">
                    <span class="button__icon">←</span>
                    <span class="button__text">Creating WSL 2 distributions from LXC images</span>
                </a>
            </span>
            

            
            <span class="button next">
                <a href="https://nathanchance.dev/posts/wsl2-kernel-clang/">
                    <span class="button__text">Building the WSL 2 kernel with Clang</span>
                    <span class="button__icon">→</span>
                </a>
            </span>
            
        </div>
    </div>


    

    

  </main>

            </div>

            
                <footer class="footer">
    
    
</footer>

            
        </div>

        



<script type="text/javascript" src="/bundle.min.599099f1f14b78b657d524b28e10e0c5098e7cd46e9c7aed73d577068a276c3ff1bb234cbf29cb313333e83cf411727b43157c91ce5b809e2ffc81664614608e.js" integrity="sha512-WZCZ8fFLeLZX1SSyjhDgxQmOfNRunHrtc9V3BoonbD/xuyNMvynLMTMz6Dz0EXJ7QxV8kc5bgJ4v/IFmRhRgjg=="></script>



    </body>
</html>
